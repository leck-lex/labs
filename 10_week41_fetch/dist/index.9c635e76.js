class t{static BASE_URL="https://deckofcardsapi.com/api/deck";static DECK_TOP="";static DECK_BOTTOM="bottom/";static DECK_RANDOM="random/";#t;constructor(){}async getNewDeck(t=1){const e=await this.#e(`/new/shuffle/?deck_count=${t}`);this.#t=e.deck_id}drawFromDeck(e,a=t.DECK_TOP){return this.#e(`/${this.#t}/draw/${a}?count=${e}`)}drawFromPile(e,a,s=t.DECK_TOP){return this.#e(`/${this.#t}/pile/${e}/draw/${s}?count=${a}`)}addToPile(t,e){return this.#e(`/${this.#t}/pile/${t}/add/?cards=${this.#a(e)}`)}#e(e){return new Promise(((a,s)=>{console.log("%c[API Call]"+e,"color: grey"),fetch(t.BASE_URL+e,{method:"GET"}).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.json()})).then((t=>{console.log("%c[API Data]","color: grey",t),a(t)})).catch((t=>s(t)))}))}#a(t){return t.map((t=>t.code)).join(",")}}class e{constructor(t){this.code,this.image,this.images={svg:"",png:""},this.suit,this.value,Object.assign(this,t)}get valueByNumber(){if(!Number.isNaN(Number.parseInt(this.value)))return Number.parseInt(this.value);switch(this.value.toUpperCase()){case"JACK":return 11;case"QUEEN":return 12;case"KING":return 13;case"ACE":return 14}}}class a{constructor(t){this.card=t,this.ramainingCards,this.roundState}}class s{static PLAYER_USER="player_user";static PLAYER_COMPUTER="player_computer";static ROUND_WIN="round_win";static ROUND_LOSE="round_lose";static ROUND_WAR="round_war";#s;constructor(){this.#r()}#r(){this.#s=new t}async setupNewGame(){try{await this.#s.getNewDeck(),await this.#i(s.PLAYER_USER),await this.#i(s.PLAYER_COMPUTER),console.log("New game ready")}catch(t){console.error(t)}}async playRound(){console.log("Play round");this.#c(s.PLAYER_USER),this.#c(s.PLAYER_COMPUTER)}async#c(s){const r=await this.#s.drawFromPile(s,1,t.DECK_BOTTOM);return new a(new e(r.cards[0]))}async#i(t){const e=await this.#s.drawFromDeck(26);await this.#s.addToPile(t,e.cards)}}class r{static#n;static get instance(){return this.#n||(this.#n=new r),this.#n}#o;constructor(){}get gameService(){return this.#o}run(){document.querySelector("main").insertAdjacentElement("afterbegin",document.createElement("h1")).innerHTML="Week 41 Lab 10 Fetch (Deck of Cards)",this.#o=new s,this.#o.setupNewGame().then((()=>this.#o.playRound()))}}r.instance.run();
//# sourceMappingURL=index.9c635e76.js.map
